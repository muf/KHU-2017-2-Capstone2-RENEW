<!DOCTYPE html>
<html>
  <head>
	<title> AP in the Sky(Service Monitor Application)</title>
  <% include ./common/header.ejs %>
    <!-- Custom CSS -->
    <link rel='stylesheet' href='/css/common/nav-bar.css' />
    <link rel='stylesheet' href='/css/appliedServicePage/appliedServicePage.css' />
   
     <!--JS --> 
    <script src="/javascripts/appliedServicePage/appliedServicePage.js"></script>
    <!-- datetime picker assets -->   
    <script type="text/javascript" src="/bower_components/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="/bower_components/moment/min/moment.min.js"></script>
    <script type="text/javascript" src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/bower_components/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>
    <link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/bower_components/eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css" />

<script>

Date.prototype.format = function(f) {
    if (!this.valueOf()) return " ";
 
    var weekName = ["일요일", "월요일", "화요일", "수요일", "목요일", "금요일", "토요일"];
    var d = this;
     
        return f.replace(/(yyyy|yy|MM|dd|E|hh|mm|ss|a\/p)/gi, function($1) {
            switch ($1) {
                case "yyyy": return d.getFullYear();
                case "yy": return (d.getFullYear() % 1000).zf(2);
                case "MM": return (d.getMonth() + 1).zf(2);
                case "dd": return d.getDate().zf(2);
                case "E": return weekName[d.getDay()];
                case "HH": return d.getHours().zf(2);
                case "hh": return ((h = d.getHours() % 12) ? h : 12).zf(2);
                case "mm": return d.getMinutes().zf(2);
                case "ss": return d.getSeconds().zf(2);
                case "a/p": return d.getHours() < 12 ? "오전" : "오후";
                default: return $1;
            }
        });
    };
    
    String.prototype.string = function(len){var s = '', i = 0; while (i++ < len) { s += this; } return s;};
    String.prototype.zf = function(len){return "0".string(len - this.length) + this;};
    Number.prototype.zf = function(len){return this.toString().zf(len);};
</script>
  </head>
  <body>  
    <% include ./common/nav-bar.ejs %>

    <div id="main-container">
      <!-- #table-container>#1 -->
      <div id="head-container" class = "container">
        서비스 신청 관리 페이지 
      </div>
      <!-- #table-container>#2 -->
      <div id="table-container" class = "container">
        <table class="table table-fixed">
          <thead>  
            <tr>
              <th style="display:none;" >오브젝트 아이디</th>
              <th>서비스 신청 시점</th>
              <th>서비스 시작 시점</th>
              <th>서비스 종료 시점</th>
              <th>최소 드론 수</th>
              <th>최대 드론 수</th>
              <th>현재 드론 수</th>
              <th>서버 주소</th>
              <th>서버 포트</th>
              <th>이메일</th>
              <th>전화번호</th>
              <th>상태</th>
            </tr>
          </thead>
          <tbody>
            <% for(var i = 0; i < appliedList.length; i++){ %>
              <tr>
                <td style="display:none;" ><%= appliedList[i]._id.toString() %></td>
                <td><%= appliedList[i].loggingDate %></td>
                <td><%= appliedList[i].serviceStartDate %></td>
                <td><%= appliedList[i].serviceEndDate %></td>
                <td><%= appliedList[i].drone.min %></td>
                <td><%= appliedList[i].drone.max %></td>
                <td><%= appliedList[i].drone.max %></td>
                <td><%= appliedList[i].server.ip %></td>
                <td><%= appliedList[i].server.port %></td>
                <td><%= appliedList[i].contact.email %></td>
                <td><%= appliedList[i].contact.number %></td>
                <td><%= appliedList[i].state %></td>
              </tr>
            <% } %>
          </tbody>
        </table>
        <script>
          addTableEvents()
        </script>
      </div><!-- table container -->
    </div> <!-- main container  -->
  </body>
</html>